# This file is auto-generated from the global schema definitions.
# To override a column definition, add the 'override' tag to that column.

version: 2

column_definitions:
  aggregator_dau: &aggregator_dau
    name: aggregator_dau
    description: "The number of daily active traders Jupiter's aggregator. Calculated as distinct user addresses interacting with Jupiter's v6 aggregator program."
    tags:
      - override

  aggregator_fees: &aggregator_fees
    name: aggregator_fees
    description: "The total fees generated by Jupiter's v6 aggregator. In January 2025, Jupiter activated fees on Ultra mode, which vary depending on the tokens being swapped. Additionally, until January 2025, Jupiter took a 2.5% cut of all fees imposed by integrating products (eg. Phantom)."
    tags:
      - override

  aggregator_txns: &aggregator_txns
    name: aggregator_txns
    description: "The number of daily swaps initiated on Jupiter's v6 aggregator"
    tags:
      - override

  aggregator_volume: &aggregator_volume
    name: aggregator_volume
    description: "The total volume generated by Jupiter's v6 aggregator"
    tags:
      - override

  burns_native: &burns_native
    name: burns_native
    description: "The amount of native tokens burned"

  buyback_cash_flow: &buyback_cash_flow
    name: buyback_cash_flow
    description: "Portion of revenue allocated to buy back tokens of the protocol. Jupiter allocates 50% of protocol revenue to token buybacks."
    tags:
      - artemis_gaap
      - override

  circulating_supply_native: &circulating_supply_native
    name: circulating_supply_native
    description: "The circulating supply of a token in native tokens"

  fdmc: &fdmc
    name: fdmc
    description: "The fully diluted market cap of a token in USD"
    tags:
      - artemis_gaap

  gross_protocol_revenue: &gross_protocol_revenue
    name: gross_protocol_revenue
    description: "The total fees generated by Jupiter across the aggregator, dca, limit order, and perpetuals products."
    tags:
      - artemis_gaap
      - override

  market_cap: &market_cap
    name: market_cap
    description: "The market cap of a token in USD"
    tags:
      - artemis_gaap
      - override

  net_supply_change_native: &net_supply_change_native
    name: net_supply_change_native
    description: "The net change in the circulating supply of a token in native tokens"

  perp_dau: &perp_dau
    name: perp_dau
    description: "The number of unique traders on Jupiter's perpetuals product"
    tags:
      - override

  perp_fees: &perp_fees
    name: perp_fees
    description: "The fees generated by traders on Jupiter's perpetuals product."
    tags:
      - override

  perp_txns: &perp_txns
    name: perp_txns
    description: "The total number of trades on Jupiter's perpetuals product"
    tags:
      - override

  perp_volume: &perp_volume
    name: perp_volume
    description: "The total trading volume on Jupiter's perpetuals product"
    tags:
      - override

  premine_unlocks_native: &premine_unlocks_native
    name: premine_unlocks_native
    description: "The amount of native tokens unlocked from premine"

  price: &price
    name: price
    description: "The price of a token in USD"
    tags:
      - artemis_gaap

  service_cash_flow: &service_cash_flow
    name: service_cash_flow
    description: "The share of protocol revenue accrued to the JLP pool. This is calculated as 75% of revenue generated on the perpetuals product."
    tags:
      - artemis_gaap
      - override

  token_turnover_circulating: &token_turnover_circulating
    name: token_turnover_circulating
    description: "The turnover of a token in USD, based on the token's circulating supply."
    tags:
      - artemis_gaap

  token_turnover_fdv: &token_turnover_fdv
    name: token_turnover_fdv
    description: "The turnover of a token in USD, based on the token's fully diluted supply."
    tags:
      - artemis_gaap

  token_volume: &token_volume
    name: token_volume
    description: "The volume of a token in USD"
    tags:
      - artemis_gaap

  treasury_cash_flow: &treasury_cash_flow
    name: treasury_cash_flow
    description: "Revenue allocated to the protocol's treasury for future use, including development, growth, or governance. This is calculated as 25% of revenue generated on the perpetuals product, plus all revenue generated from limit orders, DCA, and the aggregator product."
    tags:
      - artemis_gaap
      - override

  tvl: &tvl
    name: tvl
    description: "The total value locked in a protocol"

models:
  - name: ez_jupiter_metrics
    description: "This table stores metrics for the JUPITER protocol"
    columns:
      - *aggregator_dau
      - *aggregator_fees
      - *aggregator_txns
      - *aggregator_volume
      - *burns_native
      - *buyback_cash_flow
      - *circulating_supply_native
      - *fdmc
      - *gross_protocol_revenue
      - *market_cap
      - *net_supply_change_native
      - *perp_dau
      - *perp_fees
      - *perp_txns
      - *perp_volume
      - *premine_unlocks_native
      - *price
      - *service_cash_flow
      - *token_turnover_circulating
      - *token_turnover_fdv
      - *token_volume
      - *treasury_cash_flow
      - *tvl

  - name: ez_jupiter_metrics_by_token
    description: "This table stores metrics for the JUPITER protocol"
    columns:
      - *perp_dau
      - *perp_fees
      - *perp_volume

  - name: ez_jupiter_metrics_by_chain
    description: "This table stores metrics for the JUPITER protocol"
    columns:
      - *aggregator_dau
      - *aggregator_fees
      - *aggregator_txns
      - *aggregator_volume
      - *buyback_cash_flow
      - *fdmc
      - *gross_protocol_revenue
      - *market_cap
      - *perp_dau
      - *perp_fees
      - *perp_txns
      - *perp_volume
      - *price
      - *service_cash_flow
      - *token_turnover_circulating
      - *token_turnover_fdv
      - *token_volume
      - *treasury_cash_flow

